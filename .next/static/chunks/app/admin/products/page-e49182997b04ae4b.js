(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{7379:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,dynamic:()=>c});var r=a(5155),i=a(8500),s=a.n(i),d=a(2115);let c="force-dynamic";function n(){let e=(0,d.useMemo)(()=>["Flowers","Plants","Gifts","Uncategorized"],[]),t="mt-1 block w-full rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",[a,i]=(0,d.useState)([]),[c,n]=(0,d.useState)(!0),[l,o]=(0,d.useState)(!1),[x,m]=(0,d.useState)(!1),[u,g]=(0,d.useState)(null),[p,h]=(0,d.useState)({id:void 0,name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0}),y=!!p.id,b=(0,d.useCallback)(async()=>{n(!0),g(null);try{let e=await fetch("/api/admin/products/list",{method:"GET",headers:{"Cache-Control":"no-cache"}}),t=await e.json().catch(()=>null);if(!e.ok)throw Error(t?.error||"Failed to load products");i(Array.isArray(t?.products)?t.products:[])}catch(e){g(e?.message||"Failed to load products"),i([])}finally{n(!1)}},[]);async function k(e){e.preventDefault(),m(!0),g(null);try{let e=await fetch(y?"/api/admin/products/update":"/api/admin/products/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:p.id,name:p.name,description:p.description,category:p.category,price:p.price,stock_quantity:p.stock_quantity,image_url:p.image_url,is_active:p.is_active})}),t=await e.json().catch(()=>null);if(!e.ok)throw Error(t?.error||(y?"Failed to update product":"Failed to create product"));o(!1),h({id:void 0,name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0}),await b()}catch(e){g(e?.message||(y?"Failed to update product":"Failed to create product"))}finally{m(!1)}}async function f(e){if(window.confirm("Delete this product? This cannot be undone.")){g(null);try{let t=await fetch("/api/admin/products/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),a=await t.json().catch(()=>null);if(!t.ok)throw Error(a?.error||"Failed to delete product");await b()}catch(e){g(e?.message||"Failed to delete product")}}}return(0,d.useEffect)(()=>{b()},[b]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Products"}),(0,r.jsx)("button",{type:"button",onClick:()=>{l?(o(!1),h({id:void 0,name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0})):o(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:l?"Close":"Add Product"})]}),l&&(0,r.jsxs)("form",{onSubmit:k,className:"mb-6 bg-white dark:bg-zinc-800 shadow-sm rounded-lg p-6",children:[(0,r.jsx)("div",{className:"flex items-start justify-between gap-4 mb-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:y?"Edit product":"New product"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y?"Update details and save changes.":"Create a new product for your store."})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,r.jsx)("input",{type:"text",value:p.name,onChange:e=>h(t=>({...t,name:e.target.value})),className:t,placeholder:"Product name",required:!0,disabled:x})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),(0,r.jsx)("select",{value:p.category,onChange:e=>h(t=>({...t,category:e.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:x,children:e.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Price"}),(0,r.jsx)("input",{type:"number",inputMode:"decimal",min:0,step:"0.01",value:p.price,onChange:e=>h(t=>({...t,price:e.target.value})),className:t,placeholder:"0.00",required:!0,disabled:x})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quantity"}),(0,r.jsx)("input",{type:"number",inputMode:"numeric",min:0,step:1,value:p.stock_quantity,onChange:e=>h(t=>({...t,stock_quantity:e.target.value})),className:t,placeholder:"0",required:!0,disabled:x})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image URL"}),(0,r.jsx)("input",{type:"url",value:p.image_url,onChange:e=>h(t=>({...t,image_url:e.target.value})),className:t,placeholder:"https://...",disabled:x})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,r.jsx)("textarea",{value:p.description,onChange:e=>h(t=>({...t,description:e.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:3,placeholder:"Optional description",disabled:x})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center gap-2",children:[(0,r.jsx)("input",{id:"is_active",type:"checkbox",checked:p.is_active,onChange:e=>h(t=>({...t,is_active:e.target.checked})),className:"h-4 w-4 rounded border-gray-300",disabled:x}),(0,r.jsx)("label",{htmlFor:"is_active",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{o(!1),h({id:void 0,name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0})},className:"px-4 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-700",disabled:x,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:x,className:"bg-indigo-600 disabled:opacity-60 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:x?y?"Saving…":"Creating…":y?"Save changes":"Create product"})]})]}),u&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 dark:bg-zinc-800 dark:border-red-900/40 dark:text-red-300 rounded-md p-4 text-sm",children:u}),(0,r.jsx)("div",{className:"bg-white dark:bg-zinc-800 shadow-sm rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-zinc-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-zinc-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 relative",children:(0,r.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-zinc-800 divide-y divide-gray-200 dark:divide-zinc-700",children:c?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:6,children:"Loading…"})}):0===a.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:6,children:"No products."})}):a.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,r.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.image_url||"https://images.unsplash.com/photo-1496062031456-07b8f162a322?w=200&q=80",alt:""})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name})})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.category}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["₹",e.price]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.stock_quantity}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{o(!0),g(null),h({id:e.id,name:e.name||"",description:e.description||"",category:e.category||"Uncategorized",price:String(e.price??""),stock_quantity:String(e.stock_quantity??""),image_url:e.image_url||"",is_active:!!e.is_active})},className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"Edit"}),(0,r.jsx)("button",{type:"button",onClick:()=>f(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:"Delete"}),(0,r.jsx)(s(),{href:`/product?id=${e.id}`,className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:"Preview"})]})})]},e.id))})]})})]})}},8568:(e,t,a)=>{Promise.resolve().then(a.bind(a,7379))}},e=>{e.O(0,[500,441,794,358],()=>e(e.s=8568)),_N_E=e.O()}]);