(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{3078:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,dynamic:()=>d});var a=r(5155),s=r(2115);let d="force-dynamic";function i(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[i,l]=(0,s.useState)(null),[n,c]=(0,s.useState)(""),[o,x]=(0,s.useState)("all"),m=(0,s.useMemo)(()=>{let t=n.trim().toLowerCase();return e.filter(e=>("all"===o||String(e.status)===o)&&(!t||[e.order_number,e.users?.email??"",e.coupon_code??"",String(e.total_amount??"")].join(" ").toLowerCase().includes(t)))},[e,n,o]),p=(0,s.useCallback)(async()=>{d(!0),l(null);try{let e=await fetch("/api/admin/orders/list",{method:"GET",headers:{"Cache-Control":"no-cache"}}),r=await e.json().catch(()=>null);if(!e.ok)throw Error(r?.error||"Failed to load orders");t(Array.isArray(r?.orders)?r.orders:[])}catch(e){l(e?.message||"Failed to load orders"),t([])}finally{d(!1)}},[]);return(0,s.useEffect)(()=>{p()},[p]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Orders"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Search by order number, customer email, or coupon."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)("input",{value:n,onChange:e=>c(e.target.value),placeholder:"Search orders",className:"w-full sm:w-72 rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),(0,a.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"w-full sm:w-48 rounded-md border border-gray-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-gray-900 dark:text-white px-3 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[(0,a.jsx)("option",{value:"all",children:"All statuses"}),(0,a.jsx)("option",{value:"pending",children:"pending"}),(0,a.jsx)("option",{value:"confirmed",children:"confirmed"}),(0,a.jsx)("option",{value:"shipped",children:"shipped"}),(0,a.jsx)("option",{value:"delivered",children:"delivered"}),(0,a.jsx)("option",{value:"cancelled",children:"cancelled"})]})]})]}),i&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 dark:bg-zinc-800 dark:border-red-900/40 dark:text-red-300 rounded-md p-4 text-sm",children:i}),(0,a.jsx)("div",{className:"bg-white dark:bg-zinc-800 shadow-sm rounded-lg overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-zinc-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-zinc-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Order ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Coupon"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Discount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Total"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-zinc-800 divide-y divide-gray-200 dark:divide-zinc-700",children:r?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:7,children:"Loading…"})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:7,children:"No orders."})}):m.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-indigo-600 dark:text-indigo-400",children:e.order_number}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.users?.email||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.coupon_code||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Number(e.discount_amount||0)>0?`₹${e.discount_amount}`:"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["₹",e.total_amount]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:e.status})})]},e.id))})]})})]})}},8499:(e,t,r)=>{Promise.resolve().then(r.bind(r,3078))}},e=>{e.O(0,[441,794,358],()=>e(e.s=8499)),_N_E=e.O()}]);