(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{7379:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l,dynamic:()=>c});var r=a(5155),s=a(8500),d=a.n(s),i=a(2115);let c="force-dynamic";function l(){let e=(0,i.useMemo)(()=>["Flowers","Plants","Gifts","Uncategorized"],[]),[t,a]=(0,i.useState)([]),[s,c]=(0,i.useState)(!0),[l,n]=(0,i.useState)(!1),[o,x]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),[u,h]=(0,i.useState)({name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0}),p=(0,i.useCallback)(async()=>{c(!0),g(null);try{let e=await fetch("/api/admin/products/list",{method:"GET",headers:{"Cache-Control":"no-cache"}}),t=await e.json().catch(()=>null);if(!e.ok)throw Error(t?.error||"Failed to load products");a(Array.isArray(t?.products)?t.products:[])}catch(e){g(e?.message||"Failed to load products"),a([])}finally{c(!1)}},[]);async function y(e){e.preventDefault(),x(!0),g(null);try{let e=await fetch("/api/admin/products/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u.name,description:u.description,category:u.category,price:u.price,stock_quantity:u.stock_quantity,image_url:u.image_url,is_active:u.is_active})}),t=await e.json().catch(()=>null);if(!e.ok)throw Error(t?.error||"Failed to create product");n(!1),h({name:"",description:"",category:"Flowers",price:"",stock_quantity:"",image_url:"",is_active:!0}),await p()}catch(e){g(e?.message||"Failed to create product")}finally{x(!1)}}return(0,i.useEffect)(()=>{p()},[p]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Products"}),(0,r.jsx)("button",{type:"button",onClick:()=>n(e=>!e),className:"bg-indigo-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:"Add Product"})]}),l&&(0,r.jsxs)("form",{onSubmit:y,className:"mb-6 bg-white dark:bg-zinc-800 shadow-sm rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,r.jsx)("input",{value:u.name,onChange:e=>h(t=>({...t,name:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),(0,r.jsx)("select",{value:u.category,onChange:e=>h(t=>({...t,category:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white",children:e.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Price"}),(0,r.jsx)("input",{inputMode:"decimal",value:u.price,onChange:e=>h(t=>({...t,price:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Quantity"}),(0,r.jsx)("input",{inputMode:"numeric",value:u.stock_quantity,onChange:e=>h(t=>({...t,stock_quantity:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white",required:!0})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Image URL"}),(0,r.jsx)("input",{value:u.image_url,onChange:e=>h(t=>({...t,image_url:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),(0,r.jsx)("textarea",{value:u.description,onChange:e=>h(t=>({...t,description:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-zinc-700 dark:bg-zinc-900 dark:text-white",rows:3})]}),(0,r.jsxs)("div",{className:"md:col-span-2 flex items-center gap-2",children:[(0,r.jsx)("input",{id:"is_active",type:"checkbox",checked:u.is_active,onChange:e=>h(t=>({...t,is_active:e.target.checked})),className:"h-4 w-4 rounded border-gray-300"}),(0,r.jsx)("label",{htmlFor:"is_active",className:"text-sm text-gray-700 dark:text-gray-300",children:"Active"})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-zinc-700",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"bg-indigo-600 disabled:opacity-60 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-indigo-700",children:o?"Creating…":"Create"})]})]}),m&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 dark:bg-zinc-800 dark:border-red-900/40 dark:text-red-300 rounded-md p-4 text-sm",children:m}),(0,r.jsx)("div",{className:"bg-white dark:bg-zinc-800 shadow-sm rounded-lg overflow-hidden",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-zinc-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-zinc-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 relative",children:(0,r.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-zinc-800 divide-y divide-gray-200 dark:divide-zinc-700",children:s?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:6,children:"Loading…"})}):0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-6 py-6 text-sm text-gray-500 dark:text-gray-400",colSpan:6,children:"No products."})}):t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 flex-shrink-0",children:(0,r.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.image_url||"https://images.unsplash.com/photo-1496062031456-07b8f162a322?w=200&q=80",alt:""})}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name})})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.category}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:["₹",e.price]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.stock_quantity}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.is_active?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsx)(d(),{href:`/product?id=${e.id}`,className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",children:"View"})})]},e.id))})]})})]})}},8568:(e,t,a)=>{Promise.resolve().then(a.bind(a,7379))}},e=>{e.O(0,[500,441,794,358],()=>e(e.s=8568)),_N_E=e.O()}]);